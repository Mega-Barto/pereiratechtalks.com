{"version":3,"file":"rss.xml.astro.mjs","sources":["../../src/pages/rss.xml.ts"],"sourcesContent":["import { getRssString } from '@astrojs/rss';\n\nimport { SITE, METADATA, APP_BLOG } from 'astrowind:config';\nimport { fetchPosts } from '~/utils/blog';\nimport { getPermalink } from '~/utils/permalinks';\n\nexport const GET = async () => {\n  if (!APP_BLOG.isEnabled) {\n    return new Response(null, {\n      status: 404,\n      statusText: 'Not found',\n    });\n  }\n\n  const posts = await fetchPosts();\n\n  const rss = await getRssString({\n    title: `${SITE.name}â€™s Blog`,\n    description: METADATA?.description || '',\n    site: import.meta.env.SITE,\n\n    items: posts.map((post) => ({\n      link: getPermalink(post.permalink, 'post'),\n      title: post.title,\n      description: post.excerpt,\n      pubDate: post.publishDate,\n    })),\n\n    trailingSlash: SITE.trailingSlash,\n  });\n\n  return new Response(rss, {\n    headers: {\n      'Content-Type': 'application/xml',\n    },\n  });\n};\n"],"names":[],"mappings":";;;;;AAMO,KAAM,CAAA,MAAM,KAAY,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAQvB,CAAA,CAAA,MAAA,KAAA,CAAA,CAAA,CAAQ,KAAM,CAAA,UAAW,EAAA,CAAA;AAEzB,CAAA,CAAA,KAAA,CAAA,GAAA,CAAM,CAAA,CAAA,KAAA,CAAM,YAAa,CAAA,CAAA;AAAA,CAC7B,CAAA,CAAA,CAAA,KAAA,EAAO,CAAG,CAAA,CAAA,IAAA,CAAK,IAAI,CAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CACnB,WAAA,CAAA,CAAa,UAAU,WAAe,CAAA;AAAA,CACtC,CAAA,CAAA,CAAA,IAAM,EAAA,CAAA,KAAA,CAAA,CAAA,CAAA,GAAA,CAAA,gBAAA,CAAA,GAAA,CAAA,CAAA;AAAA,CAEN,CAAA,CAAA,CAAA,KAAO,EAAA,KAAA,CAAM,GAAI,CAAA,CAAC,IAAU,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AAAA,CAC1B,CAAA,CAAA,CAAA,CAAA,CAAA,IAAM,EAAA,YAAA,CAAa,IAAK,CAAA,SAAA,CAAW,CAAA,CAAA,IAAA,CAAM,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACzC,OAAO,IAAK,CAAA,KAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACZ,aAAa,IAAK,CAAA,OAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAClB,SAAS,IAAK,CAAA,WAAA;AAAA,CAAA,CAAA,CAAA,CAAA,CACd,CAAA,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CAEF,eAAe,IAAK,CAAA,aAAA;AAAA,CAAA,CAAA,CACrB,CAAA,CAAA;AAEM,CAAA,CAAA,MAAA,CAAA,GAAA,CAAI,SAAS,GAAK,CAAA,CAAA,CAAA;AAAA,CAAA,CAAA,CAAA,CACvB,OAAS,CAAA,CAAA,CAAA;AAAA,CACP,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAgB,EAAA,CAAA,WAAA,CAAA,GAAA,CAAA;AAAA,CAClB,CAAA,CAAA,CAAA,CAAA;AAAA,CAAA,CAAA,CACD,CAAA,CAAA;AACH,CAAA,CAAA;;;;;;;;;"}